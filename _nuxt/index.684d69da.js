import{r as k,a as F,b as m,o as p,c as g,w as v,e as b,f as _,u as c,i as E,h as C,j as $,k as O,l as S,m as N,p as R,q as z,s as x,t as L,F as T,v as w,x as A,y as U,z as G,A as H,B as P}from"./entry.e4d51729.js";function h(){return{isFormValid:k(!1),validationRules:{title:[a=>!!a||"\u041F\u043E\u043B\u0435 \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E \u043A \u0437\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044E"]}}}const Q={class:"d-flex"},W=F({__name:"CategoryFormCreate",emits:["create"],setup(o,{emit:t}){const{isFormValid:a,validationRules:n}=h(),d=k(null),u=k({...e()});function e(){return{id:Date.now(),title:""}}function l(){a.value&&(t("create",u.value),u.value={...e()},$(()=>{d.value&&d.value.resetValidation()}))}return(f,r)=>{const y=m("v-text-field"),i=m("v-form");return p(),g(i,{ref_key:"refForm",ref:d,modelValue:c(a),"onUpdate:modelValue":r[1]||(r[1]=s=>E(a)?a.value=s:null),onSubmit:C(l,["prevent"])},{default:v(()=>[b("div",Q,[_(y,{modelValue:c(u).title,"onUpdate:modelValue":r[0]||(r[0]=s=>c(u).title=s),modelModifiers:{trim:!0},rules:c(n).title,"append-inner-icon":c(a)?"mdi-content-save-outline":"",label:"\u041D\u043E\u0432\u0430\u044F \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F",variant:"outlined",autocomplete:"off",density:"comfortable",clearable:"","onClick:appendInner":l},null,8,["modelValue","rules","append-inner-icon"])])]),_:1},8,["modelValue","onSubmit"])}}}),X={class:"d-flex"},Y=F({__name:"CategoryFormUpdate",props:{categoryForUpdate:null},emits:["update"],setup(o,{emit:t}){const a=o,{isFormValid:n,validationRules:d}=h(),u=k(null),e=k({...a.categoryForUpdate});function l(){n.value&&(t("update",e.value),e.value.title="",$(()=>{u.value&&u.value.resetValidation()}))}return(f,r)=>{const y=m("v-text-field"),i=m("v-form");return p(),g(i,{ref_key:"refForm",ref:u,modelValue:c(n),"onUpdate:modelValue":r[1]||(r[1]=s=>E(n)?n.value=s:null),onSubmit:C(l,["prevent"])},{default:v(()=>[b("div",X,[_(y,{modelValue:c(e).title,"onUpdate:modelValue":r[0]||(r[0]=s=>c(e).title=s),modelModifiers:{trim:!0},rules:c(d).title,"append-inner-icon":c(n)?"mdi-content-save-outline":"","bg-color":"#fff",variant:"outlined",autocomplete:"off",density:"compact","hide-details":"",clearable:"",autofocus:"","onClick:appendInner":l},null,8,["modelValue","rules","append-inner-icon"])])]),_:1},8,["modelValue","onSubmit"])}}});function J(o,t){window.localStorage.setItem(o,t)}function j(o){return window.localStorage.getItem(o)}const Z=[{id:1,title:"\u0417\u0430\u0435\u0445\u0430\u0442\u044C \u0432 \u0441\u0435\u0440\u0432\u0438\u0441",category_id:1,isCompleted:!1},{id:2,title:"\u041F\u043E\u0437\u0432\u043E\u043D\u0438\u0442\u044C \u043A\u043B\u0438\u0435\u043D\u0442\u0443",category_id:1,isCompleted:!1},{id:3,title:"\u0420\u043E\u0431\u043E\u0442 \u043F\u044B\u043B\u0435\u0441\u043E\u0441",category_id:2,isCompleted:!1},{id:4,title:"\u0421\u0434\u0435\u043B\u0430\u0442\u044C \u043F\u0440\u0435\u0437\u0435\u043D\u0442\u0430\u0446\u0438\u044E",category_id:1,isCompleted:!0}],M=O("task",()=>{const o=D(),t=k([...Z]);function a(i){t.value.push({...i})}function n(i){const s=t.value.findIndex(V=>V.id===i.id);t.value[s]={...i}}function d(i){t.value=[...t.value.filter(s=>s.id!==i)]}function u(i){t.value=[...t.value.filter(s=>s.category_id!==i)]}function e(i){const s=t.value.findIndex(V=>V.id===i);t.value[s].isCompleted=!t.value[s].isCompleted}const l=S(()=>{var i,s;return{category_id:(s=(i=o.activeCategory)==null?void 0:i.id)!=null?s:null}}),f=S(()=>l.value.category_id?[...t.value.filter(i=>i.category_id===l.value.category_id)]:[...t.value]),r=S(()=>f.value.filter(i=>i.isCompleted)),y=S(()=>f.value.filter(i=>!i.isCompleted));return N(t,()=>J("taskList",JSON.stringify(t.value)),{deep:!0}),R(()=>{const i=j("taskList");i&&(t.value=[...JSON.parse(i)])}),{createTask:a,updateTask:n,deleteTask:d,deleteTaskByCategoryId:u,toggleCompletedTask:e,completedTaskList:r,notCompletedTaskList:y}}),ee=[{id:1,title:"\u0421\u0440\u043E\u0447\u043D\u043E\u0435"},{id:2,title:"\u041F\u043E\u043A\u0443\u043F\u043A\u0438"}],D=O("category",()=>{const o=M(),t=k([...ee]),a=k(t.value[0]);function n(e){var l;t.value.push({...e}),a.value=(l=t.value.at(-1))!=null?l:null}function d(e){const l=t.value.findIndex(f=>f.id===e.id);t.value[l]={...e}}function u(e){var l,f;t.value=[...t.value.filter(r=>r.id!==e)],((l=a.value)==null?void 0:l.id)===e&&(a.value=(f=t.value[0])!=null?f:null),o.deleteTaskByCategoryId(e)}return N(t,()=>J("categoryList",JSON.stringify(t.value)),{deep:!0}),R(()=>{const e=j("categoryList");e&&(t.value=[...JSON.parse(e)])}),{categoryList:t,createCategory:n,updateCategory:d,deleteCategory:u,activeCategory:a}}),te={class:"d-flex justify-space-between align-center"},oe={key:1},ne=F({__name:"CategoryListItem",props:{category:null,categoryIdIsEditingMode:{default:null}},emits:["update:categoryIdIsEditingMod"],setup(o,{emit:t}){const a=D();function n(u){t("update:categoryIdIsEditingMod",u)}function d(u){a.updateCategory(u),n(null)}return(u,e)=>{var s;const l=Y,f=m("v-list-item-title"),r=m("v-btn"),y=m("v-list-item-action"),i=m("v-list-item");return p(),g(i,{active:o.category.id===((s=c(a).activeCategory)==null?void 0:s.id),onClick:e[4]||(e[4]=V=>c(a).activeCategory=o.category)},{default:v(()=>[b("div",te,[_(f,{class:"flex-grow-1 pr-5"},{default:v(()=>[o.categoryIdIsEditingMode===o.category.id?(p(),g(l,{key:0,"category-for-update":o.category,onUpdate:d,onKeydown:[e[0]||(e[0]=z(V=>n(null),["esc"])),e[1]||(e[1]=C(()=>{},["stop"]))]},null,8,["category-for-update"])):(p(),x("span",oe,L(o.category.title),1))]),_:1}),_(y,null,{default:v(()=>[_(r,{icon:"mdi-pencil",size:"small",variant:"text",onClick:e[2]||(e[2]=C(V=>n(o.category.id),["stop","prevent"]))}),_(r,{icon:"mdi-close",size:"small",variant:"text",onClick:e[3]||(e[3]=C(V=>c(a).deleteCategory(o.category.id),["stop","prevent"]))})]),_:1})])]),_:1},8,["active"])}}}),ae={key:1,class:"font-weight-bold py-3"},ue=F({__name:"CategoryList",props:{categories:{default:()=>[]}},setup(o){const t=k(null);return(a,n)=>{const d=ne,u=m("v-list");return o.categories.length?(p(),g(u,{key:0},{default:v(()=>[(p(!0),x(T,null,w(o.categories,e=>(p(),g(d,{key:e.id,"category-id-is-editing-mod":c(t),"onUpdate:category-id-is-editing-mod":n[0]||(n[0]=l=>E(t)?t.value=l:null),category:e},null,8,["category-id-is-editing-mod","category"]))),128))]),_:1})):(p(),x("div",ae,"\u0421\u043F\u0438\u0441\u043E\u043A \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0439 \u043F\u0443\u0441\u0442"))}}}),le=F({__name:"CategoriesSection",setup(o){const t=D();return(a,n)=>{const d=W,u=ue;return p(),x("section",null,[_(d,{onCreate:c(t).createCategory},null,8,["onCreate"]),_(u,{categories:c(t).categoryList},null,8,["categories"])])}}});function K(){return{isFormValid:k(!1),validationRules:{title:[a=>!!a||"\u041F\u043E\u043B\u0435 \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E \u043A \u0437\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044E"]}}}const ie={class:"d-flex"},se=F({__name:"TaskFormCreate",emits:["create"],setup(o,{emit:t}){const a=k({...e()}),n=k(null),{isFormValid:d,validationRules:u}=K();function e(){return{id:Date.now(),category_id:0,title:"",isCompleted:!1}}function l(){d.value&&(t("create",a.value),a.value={...e()},$(()=>{n.value&&n.value.resetValidation()}))}return(f,r)=>{const y=m("v-text-field"),i=m("v-form");return p(),g(i,{ref_key:"refForm",ref:n,modelValue:c(d),"onUpdate:modelValue":r[1]||(r[1]=s=>E(d)?d.value=s:null),onSubmit:C(l,["prevent"])},{default:v(()=>[b("div",ie,[_(y,{modelValue:c(a).title,"onUpdate:modelValue":r[0]||(r[0]=s=>c(a).title=s),modelModifiers:{trim:!0},rules:c(u).title,"append-inner-icon":c(d)?"mdi-content-save-outline":"",label:"\u041D\u043E\u0432\u0430\u044F \u0437\u0430\u0434\u0430\u0447\u0430",variant:"outlined",autocomplete:"off",density:"comfortable",clearable:"","onClick:appendInner":l},null,8,["modelValue","rules","append-inner-icon"])])]),_:1},8,["modelValue","onSubmit"])}}}),de={class:"d-flex"},re=F({__name:"TaskFormUpdate",props:{taskForUpdate:null},emits:["update"],setup(o,{emit:t}){const a=o,{isFormValid:n,validationRules:d}=K(),u=k(null),e=k({...a.taskForUpdate});function l(){n.value&&(t("update",e.value),e.value.title="",$(()=>{u.value&&u.value.resetValidation()}))}return(f,r)=>{const y=m("v-text-field"),i=m("v-form");return p(),g(i,{ref_key:"refForm",ref:u,modelValue:c(n),"onUpdate:modelValue":r[1]||(r[1]=s=>E(n)?n.value=s:null),onSubmit:C(l,["prevent"])},{default:v(()=>[b("div",de,[_(y,{modelValue:c(e).title,"onUpdate:modelValue":r[0]||(r[0]=s=>c(e).title=s),modelModifiers:{trim:!0},rules:c(d).title,"append-inner-icon":c(n)?"mdi-content-save-outline":"","bg-color":"#fff",variant:"outlined",autocomplete:"off",density:"compact","hide-details":"",clearable:"",autofocus:"","onClick:appendInner":l},null,8,["modelValue","rules","append-inner-icon"])])]),_:1},8,["modelValue","onSubmit"])}}}),ce={class:"d-flex justify-space-between align-center"},me={key:1},_e=F({__name:"TaskListItem",props:{task:null,taskIdIsEditingMode:{default:null}},emits:["update:taskIdIsEditingMode"],setup(o,{emit:t}){const a=M();function n(u){t("update:taskIdIsEditingMode",u)}function d(u){a.updateTask(u),n(null)}return(u,e)=>{const l=re,f=m("v-list-item-title"),r=m("v-btn"),y=m("v-list-item-action"),i=m("v-list-item");return p(),g(i,{active:o.task.isCompleted||o.taskIdIsEditingMode===o.task.id,"active-color":o.task.isCompleted?"success":"",class:"mb-2 rounded",onKeydown:e[5]||(e[5]=C(()=>{},["stop"])),onClick:e[6]||(e[6]=C(()=>{},["stop"]))},{default:v(()=>[b("div",ce,[_(f,{class:"flex-grow-1 pr-5"},{default:v(()=>[o.taskIdIsEditingMode===o.task.id?(p(),g(l,{key:0,"task-for-update":o.task,onUpdate:d,onKeydown:[e[0]||(e[0]=z(s=>n(null),["esc"])),e[1]||(e[1]=C(()=>{},["stop"]))]},null,8,["task-for-update"])):(p(),x("span",me,L(o.task.title),1))]),_:1}),_(y,null,{default:v(()=>[_(r,{color:o.task.isCompleted?"success":"",icon:"mdi-check-bold",variant:"text",size:"small",onClick:e[2]||(e[2]=C(s=>c(a).toggleCompletedTask(o.task.id),["stop"]))},null,8,["color"]),o.task.isCompleted?A("",!0):(p(),g(r,{key:0,icon:"mdi-pencil",variant:"text",size:"small",color:"default",onClick:e[3]||(e[3]=C(s=>n(o.task.id),["stop"]))})),o.task.isCompleted?A("",!0):(p(),g(r,{key:1,icon:"mdi-delete",variant:"text",size:"small",color:"default",onClick:e[4]||(e[4]=C(s=>c(a).deleteTask(o.task.id),["stop"]))}))]),_:1})])]),_:1},8,["active","active-color"])}}}),pe={key:1,class:"font-weight-bold py-5"},ve=F({__name:"TaskList",props:{tasks:{default:()=>[]}},setup(o){const t=k(0);return(a,n)=>{const d=_e,u=m("v-list");return o.tasks.length?(p(),g(u,{key:0,variant:"outlined",density:"default"},{default:v(()=>[(p(!0),x(T,null,w(o.tasks,e=>(p(),g(d,{key:e.id,"task-id-is-editing-mode":c(t),"onUpdate:task-id-is-editing-mode":n[0]||(n[0]=l=>E(t)?t.value=l:null),task:e},null,8,["task-id-is-editing-mode","task"]))),128))]),_:1})):(p(),x("div",pe,"\u0421\u043F\u0438\u0441\u043E\u043A \u0437\u0430\u0434\u0430\u0447 \u043F\u0443\u0441\u0442"))}}}),fe=F({__name:"TasksSection",setup(o){const t=M(),a=D(),n=k(null),d=S(()=>[{title:"\u0422\u0435\u043A\u0443\u0449\u0438\u0435",value:"notCompleted",tasks:t.notCompletedTaskList},{title:"\u0412\u044B\u043F\u043E\u043B\u043D\u0435\u043D\u043D\u044B\u0435",value:"completed",tasks:t.completedTaskList}]);function u(e){!e.category_id&&a.activeCategory&&(e.category_id=a.activeCategory.id),t.createTask(e),n.value="notCompleted"}return(e,l)=>{const f=se,r=m("v-tab"),y=m("v-tabs"),i=ve,s=m("v-window-item"),V=m("v-window");return p(),x("section",null,[_(f,{onCreate:u}),_(y,{modelValue:c(n),"onUpdate:modelValue":l[0]||(l[0]=I=>E(n)?n.value=I:null),"bg-color":"transparent",color:"basil",grow:""},{default:v(()=>[(p(!0),x(T,null,w(c(d),(I,B)=>(p(),g(r,{key:B,value:I.value},{default:v(()=>[U(L(I.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),_(V,{modelValue:c(n),"onUpdate:modelValue":l[1]||(l[1]=I=>E(n)?n.value=I:null)},{default:v(()=>[(p(!0),x(T,null,w(c(d),(I,B)=>(p(),g(s,{key:B,value:I.value},{default:v(()=>[_(i,{tasks:I.tasks},null,8,["tasks"])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])}}}),ge={class:"text-center mb-1"},ye={class:"d-flex justify-center flex-wrap"},ke=b("div",{class:"text-center mt-3"}," \xA9 2022 ",-1),Ce=F({__name:"TheFooter",setup(o){const t=["Vue 3 (Nuxt)","Vuetify","TypeScript"];return(a,n)=>{const d=m("v-btn"),u=m("v-container"),e=m("v-footer");return p(),g(e,{absolute:"",app:"",color:"footerBg"},{default:v(()=>[_(u,{class:"pa-1"},{default:v(()=>[b("div",ge,[_(d,{target:"_blank","prepend-icon":"mdi-github",variant:"text",href:"https://github.com/JelbyDev/TODO"},{default:v(()=>[U(" TODO list ")]),_:1})]),b("div",ye,[(p(),x(T,null,w(t,(l,f)=>b("div",{key:f,class:"pa-1"},L(l),1)),64))]),ke]),_:1})]),_:1})}}});const be={},q=o=>(H("data-v-fa3c9edb"),o=o(),P(),o),xe=q(()=>b("div",{class:"text-h5 pb-2"},"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438",-1)),Fe=q(()=>b("div",{class:"text-h5 pb-2"},"\u0417\u0430\u0434\u0430\u0447\u0438",-1));function Ve(o,t){const a=m("v-app-bar-title"),n=m("v-container"),d=m("v-app-bar"),u=le,e=m("v-col"),l=fe,f=m("v-row"),r=m("v-main"),y=Ce,i=m("v-app");return p(),g(i,null,{default:v(()=>[_(d,{color:"headerBg"},{default:v(()=>[_(n,null,{default:v(()=>[_(a,null,{default:v(()=>[U("TODO List")]),_:1})]),_:1})]),_:1}),_(r,null,{default:v(()=>[_(n,null,{default:v(()=>[_(f,{class:"pt-1"},{default:v(()=>[_(e,{class:"mt-2",cols:"12",md:"5"},{default:v(()=>[xe,_(u)]),_:1}),_(e,{class:"mt-2",cols:"12",md:"7"},{default:v(()=>[Fe,_(l)]),_:1})]),_:1})]),_:1})]),_:1}),_(y)]),_:1})}const Ee=G(be,[["render",Ve],["__scopeId","data-v-fa3c9edb"]]);export{Ee as default};

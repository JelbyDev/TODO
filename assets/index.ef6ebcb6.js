import{r as C,d as V,a as c,o as _,b as k,w as v,e as x,f as m,u as d,i as E,g as b,n as $,h as O,j as S,k as N,l as R,m as z,p as F,t as B,F as T,q as w,s as A,v as U,_ as G,x as H,y as P}from"./entry.d367bdac.js";function J(){return{isFormValid:C(!1),validationRules:{title:[u=>!!u||"\u041F\u043E\u043B\u0435 \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E \u043A \u0437\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044E"]}}}const Q={class:"d-flex"},W=V({__name:"CategoryFormCreate",emits:["create"],setup(o,{emit:t}){const{isFormValid:u,validationRules:n}=J(),s=C(null),a=C({...e()});function e(){return{id:Date.now(),title:""}}function l(){u.value&&(t("create",a.value),a.value={...e()},$(()=>{s.value&&s.value.resetValidation()}))}return(f,p)=>{const g=c("v-text-field"),i=c("v-form");return _(),k(i,{ref_key:"refForm",ref:s,modelValue:d(u),"onUpdate:modelValue":p[1]||(p[1]=r=>E(u)?u.value=r:null),onSubmit:b(l,["prevent"])},{default:v(()=>[x("div",Q,[m(g,{modelValue:d(a).title,"onUpdate:modelValue":p[0]||(p[0]=r=>d(a).title=r),modelModifiers:{trim:!0},rules:d(n).title,"append-inner-icon":d(u)?"mdi-content-save-outline":"",label:"\u041D\u043E\u0432\u0430\u044F \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F",variant:"outlined",autocomplete:"off",density:"comfortable",clearable:"","onClick:appendInner":l},null,8,["modelValue","rules","append-inner-icon"])])]),_:1},8,["modelValue","onSubmit"])}}}),X={class:"d-flex"},Y=V({__name:"CategoryFormUpdate",props:{categoryForUpdate:null},emits:["update","blur"],setup(o,{emit:t}){const u=o,{isFormValid:n,validationRules:s}=J(),a=C(null),e=C({...u.categoryForUpdate});function l(){n.value&&(t("update",e.value),e.value.title="",$(()=>{a.value&&a.value.resetValidation()}))}function f(){t("blur")}return(p,g)=>{const i=c("v-text-field"),r=c("v-form");return _(),k(r,{ref_key:"refForm",ref:a,modelValue:d(n),"onUpdate:modelValue":g[1]||(g[1]=y=>E(n)?n.value=y:null),onSubmit:b(l,["prevent"])},{default:v(()=>[x("div",X,[m(i,{modelValue:d(e).title,"onUpdate:modelValue":g[0]||(g[0]=y=>d(e).title=y),modelModifiers:{trim:!0},rules:d(s).title,"append-inner-icon":d(n)?"mdi-content-save-outline":"","bg-color":"#fff",variant:"outlined",autocomplete:"off",density:"compact","hide-details":"",clearable:"",autofocus:"",onBlur:f,"onClick:appendInner":l},null,8,["modelValue","rules","append-inner-icon"])])]),_:1},8,["modelValue","onSubmit"])}}});function j(o,t){window.localStorage.setItem(o,t)}function K(o){return window.localStorage.getItem(o)}const Z=[{id:1,title:"\u0417\u0430\u0435\u0445\u0430\u0442\u044C \u0432 \u0441\u0435\u0440\u0432\u0438\u0441",category_id:1,isCompleted:!1},{id:2,title:"\u041F\u043E\u0437\u0432\u043E\u043D\u0438\u0442\u044C \u043A\u043B\u0438\u0435\u043D\u0442\u0443",category_id:1,isCompleted:!1},{id:3,title:"\u0420\u043E\u0431\u043E\u0442 \u043F\u044B\u043B\u0435\u0441\u043E\u0441",category_id:2,isCompleted:!1},{id:4,title:"\u0421\u0434\u0435\u043B\u0430\u0442\u044C \u043F\u0440\u0435\u0437\u0435\u043D\u0442\u0430\u0446\u0438\u044E",category_id:1,isCompleted:!0}],M=O("task",()=>{const o=L(),t=C([...Z]);function u(i){t.value.push({...i})}function n(i){const r=t.value.findIndex(y=>y.id===i.id);t.value[r]={...i}}function s(i){t.value=[...t.value.filter(r=>r.id!==i)]}function a(i){t.value=[...t.value.filter(r=>r.category_id!==i)]}function e(i){const r=t.value.findIndex(y=>y.id===i);t.value[r].isCompleted=!t.value[r].isCompleted}const l=S(()=>{var i,r;return{category_id:(r=(i=o.activeCategory)==null?void 0:i.id)!=null?r:null}}),f=S(()=>l.value.category_id?[...t.value.filter(i=>i.category_id===l.value.category_id)]:[...t.value]),p=S(()=>f.value.filter(i=>i.isCompleted)),g=S(()=>f.value.filter(i=>!i.isCompleted));return N(t,()=>j("taskList",JSON.stringify(t.value)),{deep:!0}),R(()=>{const i=K("taskList");i&&(t.value=[...JSON.parse(i)])}),{createTask:u,updateTask:n,deleteTask:s,deleteTaskByCategoryId:a,toggleCompletedTask:e,completedTaskList:p,notCompletedTaskList:g}}),ee=[{id:1,title:"\u0421\u0440\u043E\u0447\u043D\u043E\u0435"},{id:2,title:"\u041F\u043E\u043A\u0443\u043F\u043A\u0438"}],L=O("category",()=>{const o=M(),t=C([...ee]),u=C(t.value[0]);function n(e){var l;t.value.push({...e}),u.value=(l=t.value.at(-1))!=null?l:null}function s(e){const l=t.value.findIndex(f=>f.id===e.id);t.value[l]={...e}}function a(e){var l,f;t.value=[...t.value.filter(p=>p.id!==e)],((l=u.value)==null?void 0:l.id)===e&&(u.value=(f=t.value[0])!=null?f:null),o.deleteTaskByCategoryId(e)}return N(t,()=>j("categoryList",JSON.stringify(t.value)),{deep:!0}),R(()=>{const e=K("categoryList");e&&(t.value=[...JSON.parse(e)])}),{categoryList:t,createCategory:n,updateCategory:s,deleteCategory:a,activeCategory:u}}),te={class:"d-flex justify-space-between align-center"},oe={key:1},ne=V({__name:"CategoryListItem",props:{category:null,categoryIdIsEditingMode:{default:null}},emits:["update:categoryIdIsEditingMode"],setup(o,{emit:t}){const u=L();function n(a){t("update:categoryIdIsEditingMode",a)}function s(a){u.updateCategory(a),n(null)}return(a,e)=>{var r;const l=Y,f=c("v-list-item-title"),p=c("v-btn"),g=c("v-list-item-action"),i=c("v-list-item");return _(),k(i,{active:o.category.id===((r=d(u).activeCategory)==null?void 0:r.id),onClick:e[5]||(e[5]=y=>d(u).activeCategory=o.category)},{default:v(()=>[x("div",te,[m(f,{class:"flex-grow-1 pr-5"},{default:v(()=>[o.categoryIdIsEditingMode===o.category.id?(_(),k(l,{key:0,"category-for-update":o.category,onUpdate:s,onBlur:e[0]||(e[0]=y=>n(null)),onKeydown:[e[1]||(e[1]=z(y=>n(null),["esc"])),e[2]||(e[2]=b(()=>{},["stop"]))]},null,8,["category-for-update"])):(_(),F("span",oe,B(o.category.title),1))]),_:1}),m(g,null,{default:v(()=>[m(p,{icon:"mdi-pencil",size:"small",variant:"text",onClick:e[3]||(e[3]=b(y=>n(o.category.id),["stop","prevent"]))}),m(p,{icon:"mdi-close",size:"small",variant:"text",onClick:e[4]||(e[4]=b(y=>d(u).deleteCategory(o.category.id),["stop","prevent"]))})]),_:1})])]),_:1},8,["active"])}}}),ue={key:1,class:"font-weight-bold py-3"},ae=V({__name:"CategoryList",props:{categories:{default:()=>[]}},setup(o){const t=C(null);return(u,n)=>{const s=ne,a=c("v-list");return o.categories.length?(_(),k(a,{key:0},{default:v(()=>[(_(!0),F(T,null,w(o.categories,e=>(_(),k(s,{key:e.id,"category-id-is-editing-mode":d(t),"onUpdate:category-id-is-editing-mode":n[0]||(n[0]=l=>E(t)?t.value=l:null),category:e},null,8,["category-id-is-editing-mode","category"]))),128))]),_:1})):(_(),F("div",ue,"\u0421\u043F\u0438\u0441\u043E\u043A \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0439 \u043F\u0443\u0441\u0442"))}}}),le=V({__name:"CategoriesSection",setup(o){const t=L();return(u,n)=>{const s=W,a=ae;return _(),F("section",null,[m(s,{onCreate:d(t).createCategory},null,8,["onCreate"]),m(a,{categories:d(t).categoryList},null,8,["categories"])])}}});function h(){return{isFormValid:C(!1),validationRules:{title:[u=>!!u||"\u041F\u043E\u043B\u0435 \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E \u043A \u0437\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044E"]}}}const ie={class:"d-flex"},se=V({__name:"TaskFormCreate",emits:["create"],setup(o,{emit:t}){const u=C({...e()}),n=C(null),{isFormValid:s,validationRules:a}=h();function e(){return{id:Date.now(),category_id:0,title:"",isCompleted:!1}}function l(){s.value&&(t("create",u.value),u.value={...e()},$(()=>{n.value&&n.value.resetValidation()}))}return(f,p)=>{const g=c("v-text-field"),i=c("v-form");return _(),k(i,{ref_key:"refForm",ref:n,modelValue:d(s),"onUpdate:modelValue":p[1]||(p[1]=r=>E(s)?s.value=r:null),onSubmit:b(l,["prevent"])},{default:v(()=>[x("div",ie,[m(g,{modelValue:d(u).title,"onUpdate:modelValue":p[0]||(p[0]=r=>d(u).title=r),modelModifiers:{trim:!0},rules:d(a).title,"append-inner-icon":d(s)?"mdi-content-save-outline":"",label:"\u041D\u043E\u0432\u0430\u044F \u0437\u0430\u0434\u0430\u0447\u0430",variant:"outlined",autocomplete:"off",density:"comfortable",clearable:"","onClick:appendInner":l},null,8,["modelValue","rules","append-inner-icon"])])]),_:1},8,["modelValue","onSubmit"])}}}),re={class:"d-flex"},de=V({__name:"TaskFormUpdate",props:{taskForUpdate:null},emits:["update","blur"],setup(o,{emit:t}){const u=o,{isFormValid:n,validationRules:s}=h(),a=C(null),e=C({...u.taskForUpdate});function l(){n.value&&(t("update",e.value),e.value.title="",$(()=>{a.value&&a.value.resetValidation()}))}function f(){t("blur")}return(p,g)=>{const i=c("v-text-field"),r=c("v-form");return _(),k(r,{ref_key:"refForm",ref:a,modelValue:d(n),"onUpdate:modelValue":g[1]||(g[1]=y=>E(n)?n.value=y:null),onSubmit:b(l,["prevent"])},{default:v(()=>[x("div",re,[m(i,{modelValue:d(e).title,"onUpdate:modelValue":g[0]||(g[0]=y=>d(e).title=y),modelModifiers:{trim:!0},rules:d(s).title,"append-inner-icon":d(n)?"mdi-content-save-outline":"","bg-color":"#fff",variant:"outlined",autocomplete:"off",density:"compact","hide-details":"",clearable:"",autofocus:"",onBlur:f,"onClick:appendInner":l},null,8,["modelValue","rules","append-inner-icon"])])]),_:1},8,["modelValue","onSubmit"])}}}),ce={class:"d-flex justify-space-between align-center"},me={key:1},_e=V({__name:"TaskListItem",props:{task:null,taskIdIsEditingMode:{default:null}},emits:["update:taskIdIsEditingMode"],setup(o,{emit:t}){const u=M();function n(a){t("update:taskIdIsEditingMode",a)}function s(a){u.updateTask(a),n(null)}return(a,e)=>{const l=de,f=c("v-list-item-title"),p=c("v-btn"),g=c("v-list-item-action"),i=c("v-list-item");return _(),k(i,{active:o.task.isCompleted||o.taskIdIsEditingMode===o.task.id,"active-color":o.task.isCompleted?"success":"",class:"mb-2 rounded",onKeydown:e[6]||(e[6]=b(()=>{},["stop"])),onClick:e[7]||(e[7]=b(()=>{},["stop"]))},{default:v(()=>[x("div",ce,[m(f,{class:"flex-grow-1 pr-5"},{default:v(()=>[o.taskIdIsEditingMode===o.task.id?(_(),k(l,{key:0,"task-for-update":o.task,onUpdate:s,onBlur:e[0]||(e[0]=r=>n(null)),onKeydown:[e[1]||(e[1]=z(r=>n(null),["esc"])),e[2]||(e[2]=b(()=>{},["stop"]))]},null,8,["task-for-update"])):(_(),F("span",me,B(o.task.title),1))]),_:1}),m(g,null,{default:v(()=>[m(p,{color:o.task.isCompleted?"success":"",icon:"mdi-check-bold",variant:"text",size:"small",onClick:e[3]||(e[3]=b(r=>d(u).toggleCompletedTask(o.task.id),["stop"]))},null,8,["color"]),o.task.isCompleted?A("",!0):(_(),k(p,{key:0,icon:"mdi-pencil",variant:"text",size:"small",color:"default",onClick:e[4]||(e[4]=b(r=>n(o.task.id),["stop"]))})),o.task.isCompleted?A("",!0):(_(),k(p,{key:1,icon:"mdi-delete",variant:"text",size:"small",color:"default",onClick:e[5]||(e[5]=b(r=>d(u).deleteTask(o.task.id),["stop"]))}))]),_:1})])]),_:1},8,["active","active-color"])}}}),ve={key:1,class:"font-weight-bold py-5"},pe=V({__name:"TaskList",props:{tasks:{default:()=>[]}},setup(o){const t=C(0);return(u,n)=>{const s=_e,a=c("v-list");return o.tasks.length?(_(),k(a,{key:0,variant:"outlined",density:"default"},{default:v(()=>[(_(!0),F(T,null,w(o.tasks,e=>(_(),k(s,{key:e.id,"task-id-is-editing-mode":d(t),"onUpdate:task-id-is-editing-mode":n[0]||(n[0]=l=>E(t)?t.value=l:null),task:e},null,8,["task-id-is-editing-mode","task"]))),128))]),_:1})):(_(),F("div",ve,"\u0421\u043F\u0438\u0441\u043E\u043A \u0437\u0430\u0434\u0430\u0447 \u043F\u0443\u0441\u0442"))}}}),fe=V({__name:"TasksSection",setup(o){const t=M(),u=L(),n=C(null),s=S(()=>[{title:"\u0422\u0435\u043A\u0443\u0449\u0438\u0435",value:"notCompleted",tasks:t.notCompletedTaskList},{title:"\u0412\u044B\u043F\u043E\u043B\u043D\u0435\u043D\u043D\u044B\u0435",value:"completed",tasks:t.completedTaskList}]);function a(e){!e.category_id&&u.activeCategory&&(e.category_id=u.activeCategory.id),t.createTask(e),n.value="notCompleted"}return(e,l)=>{const f=se,p=c("v-tab"),g=c("v-tabs"),i=pe,r=c("v-window-item"),y=c("v-window");return _(),F("section",null,[m(f,{onCreate:a}),m(g,{modelValue:d(n),"onUpdate:modelValue":l[0]||(l[0]=I=>E(n)?n.value=I:null),"bg-color":"transparent",color:"basil",grow:""},{default:v(()=>[(_(!0),F(T,null,w(d(s),(I,D)=>(_(),k(p,{key:D,value:I.value},{default:v(()=>[U(B(I.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),m(y,{modelValue:d(n),"onUpdate:modelValue":l[1]||(l[1]=I=>E(n)?n.value=I:null)},{default:v(()=>[(_(!0),F(T,null,w(d(s),(I,D)=>(_(),k(r,{key:D,value:I.value},{default:v(()=>[m(i,{tasks:I.tasks},null,8,["tasks"])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])}}}),ge={class:"text-center mb-1"},ye={class:"d-flex justify-center flex-wrap"},ke=x("div",{class:"text-center mt-3"}," \xA9 2022 ",-1),Ce=V({__name:"TheFooter",setup(o){const t=["Vue 3 (Nuxt)","Vuetify","TypeScript"];return(u,n)=>{const s=c("v-btn"),a=c("v-container"),e=c("v-footer");return _(),k(e,{absolute:"",app:"",color:"footerBg"},{default:v(()=>[m(a,{class:"pa-1"},{default:v(()=>[x("div",ge,[m(s,{target:"_blank","prepend-icon":"mdi-github",variant:"text",href:"https://github.com/JelbyDev/TODO"},{default:v(()=>[U(" TODO list ")]),_:1})]),x("div",ye,[(_(),F(T,null,w(t,(l,f)=>x("div",{key:f,class:"pa-1"},B(l),1)),64))]),ke]),_:1})]),_:1})}}});const be={},q=o=>(H("data-v-bf01592b"),o=o(),P(),o),xe=q(()=>x("div",{class:"text-h5 pb-2"},"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438",-1)),Fe=q(()=>x("div",{class:"text-h5 pb-2"},"\u0417\u0430\u0434\u0430\u0447\u0438",-1));function Ve(o,t){const u=c("v-app-bar-title"),n=c("v-container"),s=c("v-app-bar"),a=le,e=c("v-col"),l=fe,f=c("v-row"),p=c("v-main"),g=Ce,i=c("v-app");return _(),k(i,null,{default:v(()=>[m(s,{color:"headerBg"},{default:v(()=>[m(n,null,{default:v(()=>[m(u,null,{default:v(()=>[U("TODO List")]),_:1})]),_:1})]),_:1}),m(p,null,{default:v(()=>[m(n,null,{default:v(()=>[m(f,{class:"pt-1"},{default:v(()=>[m(e,{class:"mt-2",cols:"12",md:"5"},{default:v(()=>[xe,m(a)]),_:1}),m(e,{class:"mt-2",cols:"12",md:"7"},{default:v(()=>[Fe,m(l)]),_:1})]),_:1})]),_:1})]),_:1}),m(g)]),_:1})}const Ee=G(be,[["render",Ve],["__scopeId","data-v-bf01592b"]]);export{Ee as default};
